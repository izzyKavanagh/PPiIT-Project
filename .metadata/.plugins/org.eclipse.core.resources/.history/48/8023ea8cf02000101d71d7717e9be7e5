package Menus;

import java.util.List; 
import java.util.Scanner;

import Devices.Computer;
import Devices.DHCPServer;
import Devices.DNSServer;
import Devices.Router;
import Devices.Switch;
import Devices.WebServer;
import Network.NetworkManager;
import Network.Topology;

public class GuidedModeMenu {

	public static void mainMenu(Scanner scanner, Topology topology, NetworkManager manager, List<Router> routers, List<Computer> computers,
			List<Switch> switches, List<DHCPServer> dhcpServers, List<DNSServer> dnsServers, List<WebServer> webServers) 
	{
		
		System.out.println("\n=== Guided Mode: Setting up a VLAN for an Office Building ===");
		
		// STEP 1 - CREATE ROUTER
		GuidedModeUtils.printStepBox("Step 1: Create a Router!", 
				"Navigate to 'Create New Device' and create a new router with the name 'Router0'");
		
		validateUserInput(scanner, 1, "Please Select 'Create New Device' option from the menu");
	    DeviceCreationMenu.createDevice(scanner, topology, routers, computers, switches, dhcpServers, dnsServers, webServers);

	    // STEP 2 - GIVE ROUTER IP
        GuidedModeUtils.printStepBox("Step 2: Give Router0 an IP address",
        		"Navigate to 'Manage Routers' and give Router0 an the IP address: 192.168.0.1");
        	
        GuidedModeUtils.printTipBox("IP addresses ending in 1 (192.168.0.1) are reserved for routers");
		
        validateUserInput(scanner, 4, "Please Select 'Manage Routers' option from the menu");
        RouterMenu.manageRouters(routers, scanner, topology);
		
		// STEP 3 - CREATE LAYER 3 SWITCH
		GuidedModeUtils.printStepBox("Step 3: Create a Layer 3 Switch",
        		"Navigate to 'Create New Device' and create a layer 3 switch named 'CoreSwitch'");
        	
        GuidedModeUtils.printTipBox("Layer 3 switches are different than Layer 2 switches because they allow for the creation of VLAN Interface!");
        
        validateUserInput(scanner, 1, "Please Select 'Create New Device' option from the menu");
        DeviceCreationMenu.createDevice(scanner, topology, routers, computers, switches, dhcpServers, dnsServers, webServers);
		
        // STEP 4 - CONNECT ROUTER & LAYER 3 SWITCH 
        GuidedModeUtils.printStepBox("Step 4: Connect Router0 to the CoreSwitch",
        		"Navigate to 'Add Connection' and create a connection between Router0 and coreSwitch");
        	        
        validateUserInput(scanner, 8, "Please Select 'Add Connection' option from the menu");
        TopologyMenu.addConnection(scanner, topology);
        
		// STEP 5 - CREATE FIRST LAYER 2 SWITCH 
        GuidedModeUtils.printStepBox("Step 5: Create three Layer 2 Switch",
        		"Navigate to 'Create New Device' and create a layer 2 switch named 'Switch1'");
		
        GuidedModeUtils.printTipBox("The layer 2 switches will be used to seperate the office building floors into different VLANs");
        
        for (int i = 0; i < 3; i++)
        {
        	validateUserInput(scanner, 1, "Please Select 'Create New Device' option from the menu");
        	DeviceCreationMenu.createDevice(scanner, topology, routers, computers, switches, dhcpServers, dnsServers, webServers);
            if(i < 2)
            {
            	 GuidedModeUtils.printStepBox("Great! Now create the next switch",
                 		"Navigate to 'Create New Device' and create a layer 2 switch named 'Switch" + (i+2) + "'");
            }
        }
        
        // STEP 6 - CONNECT THREE 2 LAYER SWITCHES TO CORE SWITCH
        GuidedModeUtils.printStepBox("Step 6: Connect the three layer 2 switches to the CoreSwitch",
        		"Navigate to 'Add Connection' and create a connection between CoreSwitch and Switch1");
        	        
        for (int i = 0; i < 3; i++)
        {
        	validateUserInput(scanner, 8, "Please Select 'Add Connection' option from the menu");
        	TopologyMenu.addConnection(scanner, topology);
        	if(i < 2)
            {
            	 GuidedModeUtils.printStepBox("Great! Now connect the next switch",
                 		"Navigate to 'Add Connection' and create a connection between CoreSwitch and Switch" + (i+2));
            }
        }
      
        
        // STEP 7 - CREATE PC0 AND PC1
        GuidedModeUtils.printStepBox("Step 7: Create two computers",
        		"Navigate to 'Create New Device' and create a computer named 'PC0'");
		        
        for (int i = 0; i < 2; i++)
        {
        	validateUserInput(scanner, 1, "Please Select 'Create New Device' option from the menu");
        	DeviceCreationMenu.createDevice(scanner, topology, routers, computers, switches, dhcpServers, dnsServers, webServers);
            if(i < 1)
            {
            	 GuidedModeUtils.printStepBox("Great! Now create the next computer",
                 		"Navigate to 'Create New Device' and create a computer named 'PC" + (i+1) + "'");
            }
        }
        
        // STEP 8 - CONNECT PC0 & PC1 TO SWITCH1
        GuidedModeUtils.printStepBox("Step 8: Connect PC0 and PC1 to Switch1",
        		"Navigate to 'Add Connection' and create a connection between Switch1 and PC0");
        	        
        for (int i = 0; i < 2; i++)
        {
        	validateUserInput(scanner, 8, "Please Select 'Add Connection' option from the menu");
        	TopologyMenu.addConnection(scanner, topology);
        	if(i < 1)
            {
            	 GuidedModeUtils.printStepBox("Great! Now connect the next computer",
                 		"Navigate to 'Add Connection' and create a connection between Switch1 and PC" + (i+1));
            }
        }
        
        // STEP 9 - CREATE PC2 and PC3
        GuidedModeUtils.printStepBox("Step 9: Create two more computers",
        		"Navigate to 'Create New Device' and create a computer named 'PC2'");
		        
        for (int i = 0; i < 2; i++)
        {
        	validateUserInput(scanner, 1, "Please Select 'Create New Device' option from the menu");
        	DeviceCreationMenu.createDevice(scanner, topology, routers, computers, switches, dhcpServers, dnsServers, webServers);
            if(i < 1)
            {
            	 GuidedModeUtils.printStepBox("Great! Now create the next computer",
                 		"Navigate to 'Create New Device' and create a computer named 'PC" + (i+3) + "'");
            }
        }
        
        // STEP 10 - CONNECT PC2 & PC3 TO SWITCH2
        GuidedModeUtils.printStepBox("Step 10: Connect PC2 and PC3 to Switch2",
        		"Navigate to 'Add Connection' and create a connection between Switch2 and PC2");
        	        
        for (int i = 0; i < 2; i++)
        {
        	validateUserInput(scanner, 8, "Please Select 'Add Connection' option from the menu");
        	TopologyMenu.addConnection(scanner, topology);
        	if(i < 1)
            {
            	 GuidedModeUtils.printStepBox("Great! Now connect the next computer",
                 		"Navigate to 'Add Connection' and create a connection between Switch2 and PC" + (i+3));
            }
        }
        
        // STEP 11 - CREATE DHCP SERVER
        GuidedModeUtils.printStepBox("Step 11: Create a DHCP Server!", 
				"Navigate to 'Create New Device' and create a new DHCP Server with the name 'DHCPServer'");
		
		validateUserInput(scanner, 1, "Please Select 'Create New Device' option from the menu");
	    DeviceCreationMenu.createDevice(scanner, topology, routers, computers, switches, dhcpServers, dnsServers, webServers);
	    
        // STEP 12 - GIVE DHCP SERVER IP 
	    GuidedModeUtils.printStepBox("Step 12: Give DHCPServer an IP address",
        		"Navigate to 'Manage DHCP Servers' and give DHCPServer an the IP address: 192.168.0.5");
        	
        GuidedModeUtils.printTipBox("The DHCP Server's IP address will be the IP address used when setting up a helper IP on the CoreSwitch later on!");
		
        validateUserInput(scanner, 4, "Please Select 'Manage DHCP Servers' option from the menu");
        DHCPServerMenu.manageDHCPServers(scanner, dhcpServers, topology);
        
        // STEP 13 - CONNECT DHCP SERVER TO SWITCH3
        GuidedModeUtils.printStepBox("Step 13: Connect DHCPServer to Switch3",
        		"Navigate to 'Add Connection' and create a connection between Switch3 and DHCPServer");
        
        GuidedModeUtils.printTipBox("Switch3 is the switch that connects to the server room - This is the switch that we will connect all our servers to");
        
        validateUserInput(scanner, 8, "Please Select 'Add Connection' option from the menu");
    	TopologyMenu.addConnection(scanner, topology);
        
        // STEP 14 - CREATE DNS SERVER
    	GuidedModeUtils.printStepBox("Step 14: Create a DNS Server!", 
				"Navigate to 'Create New Device' and create a new DNS Server with the name 'DNSServer'");
		
		validateUserInput(scanner, 1, "Please Select 'Create New Device' option from the menu");
	    DeviceCreationMenu.createDevice(scanner, topology, routers, computers, switches, dhcpServers, dnsServers, webServers);
        
        // STEP 15 - GIVE DNS SERVER IP 
	    GuidedModeUtils.printStepBox("Step 15: Give DNSServer an IP address",
        		"Navigate to 'Manage DHCP Servers' and give DnsServer an the IP address: 192.168.0.50");
        	
        GuidedModeUtils.printTipBox("The DNS Server's IP address will be used when setting up IP Pools on the DHCPServer later on!");
		
        validateUserInput(scanner, 4, "Please Select 'Manage DNS Servers' option from the menu");
        DNSServerMenu.manageDNSServers(scanner, dnsServers, topology);
        
        // STEP 16 - CONNECT DNS SERVER TO SWITCH3
        GuidedModeUtils.printStepBox("Step 16: Connect DNSServer to Switch3",
        		"Navigate to 'Add Connection' and create a connection between Switch3 and DNSServer");
                
        validateUserInput(scanner, 8, "Please Select 'Add Connection' option from the menu");
    	TopologyMenu.addConnection(scanner, topology);
        
        // STEP 17 - MAKE VLANS ON SWITCHES -> ONE FOR EACH "FLOOR"
    	GuidedModeUtils.printStepBox("Step 17: Create VLANs on layer 2 switches",
        		"Navigate to 'Manage Switches' and select 'Switch1'. Create a VLAN where Number = 10 and named = 'VLAN10' ");
                
    	for(int i =0; i < 2; i++)
    	{
    		validateUserInput(scanner, 8, "Please Select 'Manage Switches' option from the menu");
            SwitchMenu.manageSwitches(switches, scanner, topology);
            if(i<1)
            {
            	GuidedModeUtils.printStepBox("Great! Now create a VLAN on Switch2",
                		"Navigate to 'Manage Switches' and select 'Switch2. Create a VLAN where Number = 20 and named = 'VLAN20' ");
            }
    	}
   
        // STEP 18 - ASSIGN VLANs TO PORTS ON SWITCH1
    	GuidedModeUtils.printStepBox("Step 18: Assign the VLANs to Switch1 ports",
        		"We now have to assign the VLANs we've created to the ports of Switch1 that PC0 and PC1 are connected to!");
                
    	GuidedModeUtils.printStepBox("Find out which ports on Switch1 PC0 and PC1 are using",
        		"Navigate to 'Manage Switches' and select 'Switch1'. Now select 'View Port Connections' and check what ports PC0 and PC1 are connected to Switch1 on");
    	
    	GuidedModeUtils.printStepBox("Got the port numbers? Great!",
        		"Navigate to 'Manage Switches' and select 'Switch1'. Now select 'Assign VLAN to port' and choose the port PC0 is connected to Switch1 on and assign it to VLAN10");
    	
    	for(int i =0; i < 2; i++)
    	{
    		validateUserInput(scanner, 8, "Please Select 'Manage Switches' option from the menu");
            SwitchMenu.manageSwitches(switches, scanner, topology);
            if(i<1)
            {
            	GuidedModeUtils.printStepBox("Great! Now assign VLAN10 to PC1's port aswell",
                		"Navigate to 'Manage Switches' and select 'Switch1'. Now select 'Assign VLAN to port' and choose the port PC1 is connected to Switch1 on and assign it to VLAN10");
            }
    	}
    	
    	// STEP 18 - ASSIGN VLANs TO PORTS ON SWITCH2
    	GuidedModeUtils.printStepBox("Step 19: Assign the VLANs to Switch2 ports",
        		"We now have to assign the VLANs we've created to the ports of Switch2 that PC2 and PC3 are connected to!");
                
    	GuidedModeUtils.printStepBox("Find out which ports on Switch2 PC2 and PC3 are using",
        		"Navigate to 'Manage Switches' and select 'Switch2'. Now select 'View Port Connections' and check what ports PC2 and PC3 are connected to Switch1 on");
    	
    	GuidedModeUtils.printStepBox("Got the port numbers? Great!",
        		"Navigate to 'Manage Switches' and select 'Switch2'. Now select 'Assign VLAN to port' and choose the port PC2 is connected to Switch2 on and assign it to VLAN20");
    	
    	for(int i =0; i < 2; i++)
    	{
    		validateUserInput(scanner, 8, "Please Select 'Manage Switches' option from the menu");
            SwitchMenu.manageSwitches(switches, scanner, topology);
            if(i<1)
            {
            	GuidedModeUtils.printStepBox("Great! Now assign VLAN20 to PC3's port aswell",
                		"Navigate to 'Manage Switches' and select 'Switch2'. Now select 'Assign VLAN to port' and choose the port PC3 is connected to Switch2 on and assign it to VLAN20");
            }
    	}
    	
    	// STEP 20 - CONFIGURE VLAN INTERFACE ON LAYER 3 SWITCH-> ONE FOR EACH VLAN
    	GuidedModeUtils.printStepBox("Step 20: Configure VLAN Interfaces on layer 3 switch",
        		"We now have to configure VLAN Interfaces on the 'CoreSwitch' - a VLAN Interface for each VLAN created on the layer 2 switches 'Switch1' and 'Switch2'");
    	
    	GuidedModeUtils.printStepBox("First: Configure VLAN Interface for VLAN 10",
        		"Navigate to 'Manage Switches' and select 'CoreSwitch'. Now select 'Manage VLAN Interfaces (SVIs)' and create a new VLAN Interface where VLAN ID = 10 and IP = 192.168.10.1");
    	
        GuidedModeUtils.printTipBox("The IP address assigned to a VLAN Interface will be the gateway IP for an IP Pool on the DHCPServer which we will create later on!");
        
        for(int i =0; i < 2; i++)
    	{
    		validateUserInput(scanner, 8, "Please Select 'Manage Switches' option from the menu");
            SwitchMenu.manageSwitches(switches, scanner, topology);
            if(i<1)
            {
            	GuidedModeUtils.printStepBox("Next: Configure VLAN Interface for VLAN 20",
                		"Navigate to 'Manage Switches' and select 'CoreSwitch'. Now select 'Manage VLAN Interfaces (SVIs)' and create a new VLAN Interface where VLAN ID = 20 and IP = 192.168.20.1");
            }
    	}
        
    	
        // STEP 21 - CONFIGURE IP HELPER: DHCP SERVER IP
        GuidedModeUtils.printStepBox("Step 21: Configure VLAN Interfaces on layer 3 switch",
        		"We now have to configure VLAN Interfaces on the 'CoreSwitch' - a VLAN Interface for each VLAN created on the layer 2 switches 'Switch1' and 'Switch2'");
        
        // STEP 25 - CREATE DHCP IP POOLS -> ONE FOR EACH VLAN WHERE GATEWAY IP = VLAN INTERFACE IP & DNS = DNS IP
        
        // STEP 26 - SWITCH PCs TO DYNAMIC & CHECK THEY GOT CORRECT IP ADDRESSES
        
        // STEP 27 - CREATE WEB SERVER -> NAME IT GOOGLE.COM
        
        // STEP 28 - GIVE WEB SERVER IP
        
        // STEP 29 - CONNECT WEB SERVER TO SWITCH3
        
        // STEP 30 - CREATE DNS RECORD IN DNS SERVER W IP = WEB SERVER & DOMAIN NAME = WWW.GOOGLE.COM
        
        // STEP 31 - SET WEB SERVER CONTENT -> "WELCOME TO GOOGLE.COM"
        
        
        
	}
	
	private static void validateUserInput(Scanner scanner, int validOption, String errorMessage) {
        int choice;
        
        do {
            MainMenu.printMainMenu();
            choice = scanner.nextInt();
            scanner.nextLine(); // Consume newline
            
            if (choice != validOption) {
                System.out.println(errorMessage);
            }
        } while (choice != validOption);
    }
}
